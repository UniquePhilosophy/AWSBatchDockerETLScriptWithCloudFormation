üöÄ Starting full teardown of all project infrastructure...
--------------------------------------------------------
üî• Deleting stack iac-phase2...
‚ö†Ô∏è  Stack iac-phase2 deletion failed. Checking for root cause...
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|                                                                                                                                                                                                                      DescribeStackEvents                                                                                                                                                                                                                      |
+-------------------+-----------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| LogicalResourceId |        ResourceType         |                                                                                                                                                                                                StatusReason                                                                                                                                                                                                 |
+-------------------+-----------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|  iac-phase2       |  AWS::CloudFormation::Stack |  The following resource(s) failed to delete: [LogsBucket, ETLRepository].                                                                                                                                                                                                                                                                                                                                   |
|  LogsBucket       |  AWS::S3::Bucket            |  Resource handler returned message: "The bucket you tried to delete is not empty (Service: S3, Status Code: 409, Request ID: QRPHNMT0Q8MT2N54, Extended Request ID: ZKrPEZR3hkIC7kp1yfBU9seOLNOkFZbtvjoNojt9eDkONDDif6VUhqm69IRBljzlPXbjb7kTQLEEJKlfYyN9smDjeNubED3CuG9vs85/cK4=) (SDK Attempt Count: 1)" (RequestToken: e92a35c9-fafd-3b52-40da-709282a31369, HandlerErrorCode: GeneralServiceException)   |
|  ETLRepository    |  AWS::ECR::Repository       |  Resource handler returned message: "The repository with name 'iac-etl-repo-jr' in registry with id '377983122567' cannot be deleted because it still contains images (Service: Ecr, Status Code: 400, Request ID: 483a2273-d8db-41d6-af2b-cd579e20714b) (SDK Attempt Count: 1)" (RequestToken: 7f226f28-534e-d669-e84f-de6c5b90db71, HandlerErrorCode: GeneralServiceException)                            |
|  iac-phase2       |  AWS::CloudFormation::Stack |  The following resource(s) failed to delete: [LogsBucket, ETLRepository].                                                                                                                                                                                                                                                                                                                                   |
|  LogsBucket       |  AWS::S3::Bucket            |  Resource handler returned message: "The bucket you tried to delete is not empty (Service: S3, Status Code: 409, Request ID: YACW1TB6S748EGV2, Extended Request ID: Hn6WuBiE2h/nz/DB6lbokpmzSFh2TQ7BKrDQy+jfGFVedePyKRVisHjaiX4kt//S/BLxEY7LivA=) (SDK Attempt Count: 1)" (RequestToken: 0ba6f308-4bcc-d352-c869-b730c1ef5502, HandlerErrorCode: GeneralServiceException)                                   |
|  ETLRepository    |  AWS::ECR::Repository       |  Resource handler returned message: "The repository with name 'iac-etl-repo-jr' in registry with id '377983122567' cannot be deleted because it still contains images (Service: Ecr, Status Code: 400, Request ID: 4940d544-e8fb-446e-9dcf-ab6b8a8a5221) (SDK Attempt Count: 1)" (RequestToken: 034379d0-756c-c1fb-7b7f-9fe3fcbbcce2, HandlerErrorCode: GeneralServiceException)                            |
+-------------------+-----------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

üßπ Attempting cleanup of known blocking resources...
Emptying and deleting S3 bucket: iac-logs-jr-377983122567...
Deleting Redshift workgroup: iac-workgroup-jr...
Deleting Redshift namespace: iac-namespace-jr...
üîÅ Retrying deletion of iac-phase2 after cleanup...
‚ùå iac-phase2 still failed to delete after retry. Check teardown_20251006_205217.log for details.

üî• Deleting stack iac-phase1...
‚úÖ iac-phase1 deleted successfully.

